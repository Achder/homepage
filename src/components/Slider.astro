---
type Props = {
    id: string
    name: string
    min: number
    max: number
    value: number
    step?: number
    class?: string
}

const { id, name, min, max, value, step = 1, class: className, ...rest } = Astro.props
const { pathname } = Astro.url
---

<label class:list={['text-lg grid gap-2 text-', className]} {...rest}>
    {name}
    <input
        id={id}
        class="h-4 min-w-0"
        type="range"
        min={min}
        max={max}
        value={value}
        step={step}
        data-umami-event={`changed ${name} on ${pathname}`}
    />
</label>

<style>
    input[type='range'] {
        -webkit-appearance: none;
        appearance: none;
        margin: 0;
        background-color: transparent;
    }

    input[type='range']::-webkit-slider-runnable-track {
        -webkit-appearance: none; /* Override default look */
        background-color: black;
        border-radius: 100vmax;
        height: 1.5rem;
    }

    input[type='range']::-moz-range-track {
        -webkit-appearance: none; /* Override default look */
        background-color: black;
        border-radius: 100vmax;
        height: 1.5rem;
    }

    input[type='range']:hover::-webkit-slider-runnable-track {
        background-color: #c026d3;
    }

    input[type='range']:hover::-moz-range-track {
        background-color: #c026d3;
    }

    input[type='range']::-webkit-slider-thumb {
        -webkit-appearance: none; /* Override default look */
        appearance: none;
        background-color: white;
        height: 1.5rem;
        width: 1.5rem;
        border-radius: 100vmax;
        border: 4px solid theme('colors.slate.900');
    }

    input[type='range']::-moz-range-thumb {
        -webkit-appearance: none; /* Override default look */
        appearance: none;
        background-color: white;
        height: 1rem;
        width: 1rem;
        border-radius: 100vmax;
        border: 4px solid black;
    }

    input[type='range']:hover::-webkit-slider-thumb {
        border-color: #c026d3;
    }

    @media (prefers-color-scheme: dark) {
        input[type='range']::-webkit-slider-runnable-track {
            background-color: theme('colors.slate.200');
        }

        input[type='range']::-moz-range-track {
            background-color: theme('colors.slate.200');
        }

        input[type='range']::-webkit-slider-thumb {
            background-color: theme('colors.slate.900');
            border: 4px solid theme('colors.slate.200');
        }

        input[type='range']::-moz-range-thumb {
            background-color: theme('colors.slate.900');
            border: 4px solid theme('colors.slate.200');
        }
    }
</style>
