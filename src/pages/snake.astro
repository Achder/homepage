---
import PageLayout from "../layouts/PageLayout.astro"
---

<PageLayout>
	<h1>Ssssnake</h1>
	<div class="container">
		<canvas>
		</canvas>
	</div>
</PageLayout>

<style>
	* {
		box-sizing: border-box;
	}

	.container {
		justify-self: stretch;
		display: grid;
		justify-items: center;
		aspect-ratio: 1 / 1;
	}
	canvas {
		box-sizing: border-box;
		outline: 4px solid var(--dark);
		outline-offset: -1px;
		height: 80%;
		aspect-ratio: 1 / 1;
	}
</style>

<script>
	import { Game } from '../snake/game'
	
	let game: Game
	document.addEventListener('DOMContentLoaded', () => {

		const canvas = document.querySelector("canvas")
		const field = {
			width: 50,
			height: 50,
		}
		const segmentSize = (canvas?.clientWidth ?? 0) / field.width

		if(canvas) {
			canvas.width = field.width * segmentSize
			canvas.height = field.height * segmentSize
		}

		game = new Game(field, segmentSize)
		game.loop()
  })
</script>